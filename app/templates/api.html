{% extends "base.html" %}

{% block title %}
価格チェック
{% endblock %}

{% block content %}
<h1>価格チェック</h1>

<!-- LINE通知設定ページへのリンクを追加 -->
<div style="margin: 15px 0;">
  <a href="{{ url_for('api.line_notification_setting') }}" class="btn btn-primary">LINE通知設定</a>
</div>

<!-- 価格データ取得ボタン。いずれ消す -->
<div style="margin: 15px 0;">
    <button id="getLatest" class="btn btn-primary">価格データ取得</button>
</div>
 <div id="priceOutput"></div>


<!-- 過去の価格推移を表示するセクション -->
<div class="container">
  <h2>グラフ</h2>
  <form id="dataForm">
    <label for="name">Name:</label>
    <select id="name" name="name">
      {% for product in products %}
      <option value="{{product.name}}">
        {{product.name}}
      </option>
      {% endfor %}
    </select>

    <label for="model">Model:</label>
    <select id="model" name="model" required>
      {% for product in filtered_products %}
      <option value="{{product.model}}">
        {{product.model}}
      </option>
      {% endfor %}
    </select>

    <div id="trendListDiv"></div>

    <button type="submit">更新</button>
  </form>

  <canvas id="priceTrendChart" width="400" height="200"></canvas>
</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- Date Adapter for Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
<!-- 外部JavaScriptファイルを読み込む -->
<script type="module" src="{{ url_for('static', filename='js/scripts.js') }}"></script>
{% endblock %}
